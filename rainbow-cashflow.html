<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rainbow Cashflow | A Joyful Approach to Financial Planning</title>
    <meta name="description" content="Discover the Rainbow Cashflow system, a unique 7-color values-based approach to financial planning that makes managing your money intuitive, joyful, and aligned with your life goals.">
    <meta name="keywords" content="values-based budgeting, financial planning system, manage money, joyful finance, cashflow system, financial clarity, personal finance">
    <meta property="og:title" content="Rainbow Cashflow | A Joyful Approach to Financial Planning">
    <meta property="og:description" content="A unique 7-color values-based approach to financial planning that makes managing your money intuitive, joyful, and aligned with your life goals.">
    <meta property="og:image" content="https://www.polishandbloom.com/assets/img/rainbow-og-image.jpg">
    <meta property="og:url" content="https://www.polishandbloom.com/rainbow-cashflow.html">
    <meta property="og:type" content="website">
    <link rel="icon" type="image/png" href="assets/img/favicon.png">

    <!-- Performance: Font optimization -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;700&family=Lato:wght@300;400;700&family=Lora:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Critical CSS for above-the-fold content -->
    <style>
        :root {
            --primary-color: #8B4B8A;
            --secondary-color: #E8B4E3;
            --accent-color: #F4D3F2;
            --text-color: #2C2C2C;
            --background-color: #FDFCF8;
            --surface-color: #FFFFFF;
            --border-color: #E5E5E5;
        }
        
        *, *::before, *::after { box-sizing: border-box; }
        
        body {
            font-family: 'Lato', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .site-header {
            background-color: var(--surface-color);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        
        .page-header {
            background: linear-gradient(135deg, var(--background-color) 0%, var(--accent-color) 100%);
            padding: 4rem 0;
            text-align: center;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .color-item {
            /* GPU-accelerated animations for smooth performance */
            will-change: transform, opacity;
            transform: translateZ(0);
        }
    </style>
    
    <!-- Non-critical CSS loaded asynchronously -->
    <link rel="preload" href="assets/css/style.css?v=2.1" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="assets/css/style.css?v=2.1"></noscript>

    <!-- Analytics - Load after page content -->
    <script>
        // Preload analytics for better performance
        const amplitudeScript = document.createElement('script');
        amplitudeScript.src = 'https://cdn.amplitude.com/script/a4372cbb4f253cb0f020223f94e11289.js';
        amplitudeScript.async = true;
        amplitudeScript.onload = function() {
            window.amplitude.add(window.sessionReplay.plugin({sampleRate: 1}));
            window.amplitude.init('a4372cbb4f253cb0f020223f94e11289', {"fetchRemoteConfig":true,"autocapture":true});
        };
        document.head.appendChild(amplitudeScript);
    </script>
    
    <!-- GA4 Configuration - Defer loading -->
    <script defer src="config/ga4.js"></script>
</head>
<body class="page-transition">
    <!-- Journey Progress Indicator -->
    <div class="journey-progress">
        <div class="journey-progress-bar" style="width: 60%"></div>
    </div>
    
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div id="mobile-nav-scrim" class="hidden"></div>
    <header class="site-header">
        <div class="container">
            <nav class="main-nav">
                <a href="index.html" class="logo">Polish + Bloom</a>
                <ul class="nav-links">
                    <li><a href="about.html">About</a></li>
                    <li><a href="bloom-circles.html">Bloom Circles</a></li>
                    <li><a href="rainbow-cashflow.html">Rainbow Cashflow</a></li>
                    <li><a href="stories.html">Stories</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="join.html" class="button">Join Now</a></li>
                </ul>
                <button id="hamburger-btn" class="hamburger-btn" aria-label="Open Menu" aria-expanded="false">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </nav>
        </div>
        <div id="mobile-nav" class="mobile-nav">
            <nav>
                <ul>
                    <li><a href="about.html">About</a></li>
                    <li><a href="bloom-circles.html">Bloom Circles</a></li>
                    <li><a href="rainbow-cashflow.html">Rainbow Cashflow</a></li>
                    <li><a href="stories.html">Stories</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="apply.html" class="button button-primary">Apply</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="page-header">
            <div class="container fade-in">
                <h1>Rainbow Cashflow</h1>
                <p class="subheadline">A signature 7-color system to align your money with your values‚Äîmaking space for survival, dreams, and generosity.</p>
            </div>
        </section>

        <section class="page-content" style="padding-bottom: 0;">
            <div class="container">
                <div class="content-feature-block" id="rainbow-value-system">
                    <div class="feature-text fade-in">
                        <h2 style="font-size: 2.25rem;">Your Money, Your Values</h2>
                        <div class="value-benefits">
                            <div class="benefit-item">
                                <div class="benefit-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                                </div>
                                <span>From stress to empowerment</span>
                            </div>
                            <div class="benefit-item">
                                <div class="benefit-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg>
                                </div>
                                <span>Expansive, not restrictive</span>
                            </div>
                            <div class="benefit-item">
                                <div class="benefit-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11H5a2 2 0 0 0-2 2v3c0 2.24 1.79 4 4 4h3.5"></path><path d="M15 11h4a2 2 0 0 1 2 2v3c0 2.24-1.79 4-4 4H13.5"></path><path d="M12 15V9"></path><path d="M12 15l3-3"></path><path d="M12 15l-3-3"></path></svg>
                                </div>
                                <span>Uniquely yours</span>
                            </div>
                        </div>
                        <div class="value-cta">
                            <div class="cta-text">
                                <span class="cta-action">Click any value below</span>
                                <span class="cta-result">to see how it transforms your money</span>
                            </div>
                            <div class="cta-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 13l3 3 7-7"></path><path d="M12 17l4-4-4-4"></path></svg>
                            </div>
                        </div>
                    </div>
                    <div class="feature-visual fade-in" style="transition-delay: 0.2s;">
                        <div class="color-system-grid">
                            <!-- Survival -->
                            <a href="#" class="color-item" data-color="survival" style="--color: var(--color-red);">
                                <div class="color-item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                                </div>
                                <h3>Survival</h3>
                            </a>
                            <!-- Lifestyle -->
                            <a href="#" class="color-item" data-color="lifestyle" style="--color: var(--color-orange);">
                                <div class="color-item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line></svg>
                                </div>
                                <h3>Lifestyle</h3>
                            </a>
                            <!-- Dreams -->
                            <a href="#" class="color-item" data-color="dreams" style="--color: var(--color-yellow);">
                                <div class="color-item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                </div>
                                <h3>Dreams</h3>
                            </a>
                            <!-- Growth -->
                            <a href="#" class="color-item" data-color="growth" style="--color: var(--color-green);">
                                <div class="color-item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.25 8.25A6.34 6.34 0 0 0 17 6.13V4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v2.13A6.34 6.34 0 0 0 6.75 8.25c-3.14 2.1-4.25 6-2.25 9s6 4.25 9 2.25s4.25-6 2.25-9"></path><path d="m14 12-2 2"></path><path d="M12 14l2-2"></path><path d="M3.5 14.5A6.34 6.34 0 0 0 8 18.87V21a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2.13a6.34 6.34 0 0 0 4.5-4.37c3.14-2.1 4.25-6 2.25-9s-6-4.25-9-2.25s-4.25 6-2.25 9z"></path></svg>
                                </div>
                                <h3>Growth</h3>
                            </a>
                            <!-- Security -->
                            <a href="#" class="color-item" data-color="security" style="--color: var(--color-blue);">
                                <div class="color-item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                                </div>
                                <h3>Security</h3>
                            </a>
                            <!-- Education -->
                            <a href="#" class="color-item" data-color="education" style="--color: var(--color-purple);">
                                <div class="color-item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
                                </div>
                                <h3>Education</h3>
                            </a>
                            <!-- Giving Back -->
                            <a href="#" class="color-item" data-color="giving" style="--color: var(--color-pink);">
                                <div class="color-item-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                                </div>
                                <h3>Giving Back</h3>
                            </a>
                            <!-- And More... -->
                            <a href="#" class="color-item" data-color="custom">
                                <h3>And More...</h3>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Interactive Rainbow Financial Calculator -->
                <section id="rainbow-calculator" class="rainbow-calculator-section fade-in" style="transition-delay: 0.4s;">
                    <div class="calculator-container">
                        <div class="calculator-header">
                            <h2>üåà Interactive Rainbow Cashflow Calculator</h2>
                            <p>Adjust the sliders below to see how your money flows across your values. Watch your personal rainbow come to life!</p>
                        </div>
                        
                        <!-- Monthly Income Input -->
                        <div class="income-input-section">
                            <label for="monthly-income">Monthly Income ($)</label>
                            <input type="number" id="monthly-income" value="5000" min="0" step="100" placeholder="Enter your monthly income">
                        </div>
                        
                        <!-- Financial Category Sliders -->
                        <div class="sliders-grid">
                            <!-- Survival -->
                            <div class="slider-item" data-color="survival">
                                <div class="slider-header">
                                    <div class="slider-icon" style="background-color: #FF6B6B;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                                    </div>
                                    <div class="slider-info">
                                        <h4>Survival</h4>
                                        <p>Rent, utilities, groceries, transportation</p>
                                    </div>
                                    <div class="slider-display">
                                        <div class="amount-input-container">
                                            <span class="dollar-symbol">$</span>
                                            <input type="number" class="amount-input" data-category="survival" min="0" value="0" step="50" placeholder="0">
                                        </div>
                                        <span class="percentage-display">0%</span>
                                    </div>
                                </div>
                                <div class="slider-container">
                                    <input type="range" class="financial-slider" data-category="survival" min="0" max="100" value="0" step="1">
                                    <div class="slider-track" style="background: linear-gradient(90deg, #FF6B6B, #ff8a8a);"></div>
                                </div>
                            </div>
                            
                            <!-- Lifestyle -->
                            <div class="slider-item" data-color="lifestyle">
                                <div class="slider-header">
                                    <div class="slider-icon" style="background-color: #FF9F43;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line></svg>
                                    </div>
                                    <div class="slider-info">
                                        <h4>Lifestyle</h4>
                                        <p>Dining out, entertainment, hobbies, subscriptions</p>
                                    </div>
                                    <div class="slider-display">
                                        <div class="amount-input-container">
                                            <span class="dollar-symbol">$</span>
                                            <input type="number" class="amount-input" data-category="lifestyle" min="0" value="0" step="50" placeholder="0">
                                        </div>
                                        <span class="percentage-display">0%</span>
                                    </div>
                                </div>
                                <div class="slider-container">
                                    <input type="range" class="financial-slider" data-category="lifestyle" min="0" max="100" value="0" step="1">
                                    <div class="slider-track" style="background: linear-gradient(90deg, #FF9F43, #ffb366);"></div>
                                </div>
                            </div>
                            
                            <!-- Dreams -->
                            <div class="slider-item" data-color="dreams">
                                <div class="slider-header">
                                    <div class="slider-icon" style="background-color: #F7DC6F;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                                    </div>
                                    <div class="slider-info">
                                        <h4>Dreams</h4>
                                        <p>Travel, big purchases, passion projects</p>
                                    </div>
                                    <div class="slider-display">
                                        <div class="amount-input-container">
                                            <span class="dollar-symbol">$</span>
                                            <input type="number" class="amount-input" data-category="dreams" min="0" value="0" step="50" placeholder="0">
                                        </div>
                                        <span class="percentage-display">0%</span>
                                    </div>
                                </div>
                                <div class="slider-container">
                                    <input type="range" class="financial-slider" data-category="dreams" min="0" max="100" value="0" step="1">
                                    <div class="slider-track" style="background: linear-gradient(90deg, #F7DC6F, #f9e79f);"></div>
                                </div>
                            </div>
                            
                            <!-- Growth -->
                            <div class="slider-item" data-color="growth">
                                <div class="slider-header">
                                    <div class="slider-icon" style="background-color: #58D68D;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg>
                                    </div>
                                    <div class="slider-info">
                                        <h4>Growth</h4>
                                        <p>Investments, business opportunities, side hustles</p>
                                    </div>
                                    <div class="slider-display">
                                        <div class="amount-input-container">
                                            <span class="dollar-symbol">$</span>
                                            <input type="number" class="amount-input" data-category="growth" min="0" value="0" step="50" placeholder="0">
                                        </div>
                                        <span class="percentage-display">0%</span>
                                    </div>
                                </div>
                                <div class="slider-container">
                                    <input type="range" class="financial-slider" data-category="growth" min="0" max="100" value="0" step="1">
                                    <div class="slider-track" style="background: linear-gradient(90deg, #58D68D, #7dd3a0);"></div>
                                </div>
                            </div>
                            
                            <!-- Security -->
                            <div class="slider-item" data-color="security">
                                <div class="slider-header">
                                    <div class="slider-icon" style="background-color: #5DADE2;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                                    </div>
                                    <div class="slider-info">
                                        <h4>Security</h4>
                                        <p>Emergency fund, insurance, retirement savings</p>
                                    </div>
                                    <div class="slider-display">
                                        <div class="amount-input-container">
                                            <span class="dollar-symbol">$</span>
                                            <input type="number" class="amount-input" data-category="security" min="0" value="0" step="50" placeholder="0">
                                        </div>
                                        <span class="percentage-display">0%</span>
                                    </div>
                                </div>
                                <div class="slider-container">
                                    <input type="range" class="financial-slider" data-category="security" min="0" max="100" value="0" step="1">
                                    <div class="slider-track" style="background: linear-gradient(90deg, #5DADE2, #7cbce8);"></div>
                                </div>
                            </div>
                            
                            <!-- Education -->
                            <div class="slider-item" data-color="education">
                                <div class="slider-header">
                                    <div class="slider-icon" style="background-color: #BB8FCE;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
                                    </div>
                                    <div class="slider-info">
                                        <h4>Education</h4>
                                        <p>Courses, books, conferences, skill development</p>
                                    </div>
                                    <div class="slider-display">
                                        <div class="amount-input-container">
                                            <span class="dollar-symbol">$</span>
                                            <input type="number" class="amount-input" data-category="education" min="0" value="0" step="50" placeholder="0">
                                        </div>
                                        <span class="percentage-display">0%</span>
                                    </div>
                                </div>
                                <div class="slider-container">
                                    <input type="range" class="financial-slider" data-category="education" min="0" max="100" value="0" step="1">
                                    <div class="slider-track" style="background: linear-gradient(90deg, #BB8FCE, #c9a6d6);"></div>
                                </div>
                            </div>
                            
                            <!-- Giving Back -->
                            <div class="slider-item" data-color="giving">
                                <div class="slider-header">
                                    <div class="slider-icon" style="background-color: #F1948A;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                                    </div>
                                    <div class="slider-info">
                                        <h4>Giving Back</h4>
                                        <p>Charity, helping family, community support</p>
                                    </div>
                                    <div class="slider-display">
                                        <div class="amount-input-container">
                                            <span class="dollar-symbol">$</span>
                                            <input type="number" class="amount-input" data-category="giving" min="0" value="0" step="50" placeholder="0">
                                        </div>
                                        <span class="percentage-display">0%</span>
                                    </div>
                                </div>
                                <div class="slider-container">
                                    <input type="range" class="financial-slider" data-category="giving" min="0" max="100" value="0" step="1">
                                    <div class="slider-track" style="background: linear-gradient(90deg, #F1948A, #f4a9a3);"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Your Money Rainbow (moved after sliders) -->
                        <div class="rainbow-progress-container">
                            <div class="rainbow-progress-header">
                                <h3>Your Money Rainbow</h3>
                                <div class="total-display">
                                    <span id="total-allocated">$0</span> / <span id="total-income">$5,000</span>
                                    <span class="remaining" id="remaining-amount">($5,000 remaining)</span>
                                </div>
                            </div>
                            <div class="rainbow-progress-bar" id="rainbow-progress">
                                <div class="progress-segment" data-color="survival" style="width: 0%; background-color: #FF6B6B;"></div>
                                <div class="progress-segment" data-color="lifestyle" style="width: 0%; background-color: #FF9F43;"></div>
                                <div class="progress-segment" data-color="dreams" style="width: 0%; background-color: #F7DC6F;"></div>
                                <div class="progress-segment" data-color="growth" style="width: 0%; background-color: #58D68D;"></div>
                                <div class="progress-segment" data-color="security" style="width: 0%; background-color: #5DADE2;"></div>
                                <div class="progress-segment" data-color="education" style="width: 0%; background-color: #BB8FCE;"></div>
                                <div class="progress-segment" data-color="giving" style="width: 0%; background-color: #F1948A;"></div>
                            </div>
                            <div class="progress-labels">
                                <span class="label-survival">Survival</span>
                                <span class="label-lifestyle">Lifestyle</span>
                                <span class="label-dreams">Dreams</span>
                                <span class="label-growth">Growth</span>
                                <span class="label-security">Security</span>
                                <span class="label-education">Education</span>
                                <span class="label-giving">Giving</span>
                            </div>
                        </div>
                        
                        <!-- Personalized Reflection Report -->
                        <div class="reflection-report" id="reflection-report">
                            <div class="reflection-header">
                                <h3>‚ú® Your Personalized Rainbow Reflection</h3>
                                <p class="reflection-subtitle">Insights crafted just for you</p>
                            </div>
                            
                            <div class="reflection-content">
                                <div class="reflection-text" id="reflection-text">
                                    <p>üå± Welcome to your Rainbow Cashflow journey! As you allocate your income across the categories above, I'll create a personalized reflection just for you.</p>
                                    <p>üí° <strong>Get started:</strong> Try typing dollar amounts in the category inputs above (like $2000 for Survival), and watch your personalized insights bloom here!</p>
                                </div>
                                
                                <div class="reflection-actions">
                                    <button class="button button-secondary" id="email-rainbow">
                                        üìß Email My Rainbow
                                    </button>
                                    <a href="https://calendly.com/polish-bloom/clarity-call" class="button button-primary" target="_blank">
                                        üí´ Schedule Clarity Call
                                    </a>
                                    <a href="apply.html" class="button button-outline">
                                        üå∏ Join Inner Bloom Circle
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- Rainbow Comparison (Previous vs Current) -->
                        <div class="rainbow-comparison" id="rainbow-comparison">
                            <div class="comparison-header">
                                <h3>üå± Your Rainbow Growth Journey</h3>
                                <p class="comparison-subtitle">See how your financial garden is blooming</p>
                            </div>
                            
                            <div class="comparison-content">
                                <div class="comparison-bars">
                                    <div class="comparison-item">
                                        <h4>Previous Month</h4>
                                        <div class="mini-rainbow-bar" id="previous-rainbow">
                                            <div class="mini-progress-segment" style="background-color: #f3f4f6; width: 100%; color: #6b7280; font-size: 0.9rem;">No data yet</div>
                                        </div>
                                    </div>
                                    <div class="comparison-arrow">‚û°Ô∏è</div>
                                    <div class="comparison-item">
                                        <h4>Current Rainbow</h4>
                                        <div class="mini-rainbow-bar" id="current-rainbow">
                                            <div class="mini-progress-segment" style="background-color: #f3f4f6; width: 100%; color: #6b7280; font-size: 0.9rem;">Start allocating above</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="growth-celebrations" id="growth-celebrations">
                                    <div class="celebration-item">üå± Start allocating your income above to see your growth journey!</div>
                                    <div class="celebration-item">üìä Your progress will be saved and compared month-to-month</div>
                                </div>
                            </div>
                        </div>

                        <!-- Gentle Rebalancing Tips -->
                        <div class="rebalancing-tips" id="rebalancing-tips">
                            <div class="tips-header">
                                <h3>üåø Gentle Rebalancing Suggestions</h3>
                                <p class="tips-subtitle">Small shifts, beautiful growth</p>
                            </div>
                            
                            <div class="tips-content" id="tips-content">
                                <div class="tip-item">
                                    <div class="tip-title">üåü Getting Started</div>
                                    <div class="tip-description">Begin by allocating amounts to each category above. I'll provide personalized suggestions based on your unique rainbow!</div>
                                </div>
                                <div class="tip-item">
                                    <div class="tip-title">üí° Pro Tip</div>
                                    <div class="tip-description">Try the preset buttons above for quick starting templates, then customize to match your values.</div>
                                </div>
                            </div>
                            
                            <div class="monthly-challenge" id="monthly-challenge">
                                <h4>üéØ This Month's Rainbow Challenge</h4>
                                <p id="challenge-text">Complete your rainbow allocation above to unlock your personalized monthly challenge!</p>
                            </div>
                        </div>
                        
                        <!-- Smart Suggestions -->
                        <div class="smart-suggestions" id="smart-suggestions">
                            <h3>üí° Smart Suggestions</h3>
                            <div class="suggestions-content" id="suggestions-content">
                                <p>Adjust your sliders above to get personalized recommendations for your financial rainbow!</p>
                            </div>
                        </div>
                        
                        <!-- Quick Preset Buttons -->
                        <div class="preset-buttons">
                            <h3>Quick Start Templates</h3>
                            <div class="preset-grid">
                                <button class="preset-btn" data-preset="conservative">
                                    üõ°Ô∏è Conservative
                                    <small>Focus on security & survival</small>
                                </button>
                                <button class="preset-btn" data-preset="balanced">
                                    ‚öñÔ∏è Balanced
                                    <small>Equal focus across all areas</small>
                                </button>
                                <button class="preset-btn" data-preset="growth">
                                    üìà Growth-Focused
                                    <small>Prioritize investments & dreams</small>
                                </button>
                                <button class="preset-btn" data-preset="dreamer">
                                    ‚ú® The Dreamer
                                    <small>Save big for your goals</small>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Detailed breakout view -->
                <div class="rainbow-details-container fade-in" style="transition-delay: 0.3s;">
                    <div id="rainbow-details-content">
                        <!-- JS will populate this -->
                        <div class="rainbow-detail-card" data-color="initial">
                             <div class="card-content">
                                <h3>Click a value to learn more</h3>
                                <p>Each color in our Rainbow Cashflow system represents a core area of your financial life, helping you build a budget that is both practical and aspirational.</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <section id="rainbow-how-it-works">
            <div class="container">
                <h2 class="section-title fade-in">How It Works</h2>
                <p class="subheadline fade-in" style="transition-delay: 0.1s;">A simple, three-step process to align your finances with your life.</p>
                <div class="journey-timeline single-sided-timeline">
                    <div class="timeline-item fade-in">
                        <div class="timeline-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="13.5" cy="6.5" r=".5" fill="currentColor"></circle><circle cx="17.5" cy="10.5" r=".5" fill="currentColor"></circle><circle cx="8.5" cy="7.5" r=".5" fill="currentColor"></circle><circle cx="6.5" cy="12.5" r=".5" fill="currentColor"></circle><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.47-1.125-.29-.289-.682-.47-1.125-.47H10.5c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5H16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5H12.5c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5H17c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5H12.5C10.015 3.5 8 5.515 8 8c0 .828.672 1.5 1.5 1.5H18c1.381 0 2.5 1.119 2.5 2.5S19.381 14.5 18 14.5H12c-1.381 0-2.5 1.119-2.5 2.5S10.619 19.5 12 19.5h5.5c1.381 0 2.5 1.119 2.5 2.5s-1.119 2.5-2.5 2.5z"></path></svg>
                        </div>
                        <div class="timeline-content">
                            <h3>1. Discover Your Colors</h3>
                            <p>Identify your core values and map them to our seven financial categories, creating a budget that's a true reflection of you.</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in" style="transition-delay: 0.1s;">
                        <div class="timeline-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg>
                        </div>
                        <div class="timeline-content">
                            <h3>2. Create Your Flow</h3>
                            <p>We'll help you design a spending and saving plan that feels natural and motivating, not restrictive.</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in" style="transition-delay: 0.2s;">
                        <div class="timeline-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                        </div>
                        <div class="timeline-content">
                            <h3>3. Build Confidence</h3>
                            <p>Gain the skills to manage your money effectively, invest wisely, and build long-term financial security.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="testimonials">
            <div class="container">
                <h2 class="section-title fade-in">Real Stories, Real Results</h2>
                <p class="subheadline fade-in" style="transition-delay: 0.1s;">See how the Rainbow Cashflow system is changing lives.</p>
                <div class="testimonial-container">
                    <div class="testimonial-item fade-in">
                        <img src="https://xsgames.co/randomusers/assets/avatars/male/74.jpg" alt="Photo of Alex M." class="testimonial-avatar">
                        <blockquote>"As a first-generation immigrant, I always felt behind when it came to money. Rainbow Cashflow gave me a clear, empowering structure to finally understand my finances and build a life on my terms. It helped me go from survival mode to dreaming again."</blockquote>
                        <cite class="testimonial-author">Alex M.<span>Small Business Owner</span></cite>
                    </div>
                    <div class="testimonial-item fade-in" style="transition-delay: 0.1s;">
                        <img src="https://xsgames.co/randomusers/assets/avatars/female/71.jpg" alt="Photo of Jessica L." class="testimonial-avatar">
                        <blockquote>"I used to think managing money meant sacrificing the things I loved. Rainbow Cashflow changed that. I'm investing in my future and booking the trip of a lifetime this year. It helped me align my values with my finances‚Äîwithout guilt."</blockquote>
                        <cite class="testimonial-author">Jessica L.<span>Marketing Professional</span></cite>
                    </div>
                    <div class="testimonial-item fade-in" style="transition-delay: 0.2s;">
                        <img src="https://xsgames.co/randomusers/assets/avatars/female/43.jpg" alt="Photo of Emily T." class="testimonial-avatar">
                        <blockquote>"Before Rainbow Cashflow, I felt overwhelmed and unsure where my money was going. The 7-color system made everything click. For the first time, I'm spending with purpose, saving for joy, and finally feeling in control."</blockquote>
                        <cite class="testimonial-author">Emily T.<span>Rainbow Cashflow Member</span></cite>
                    </div>
                </div>
            </div>
        </section>

        <section id="start">
            <div class="container">
                <h2 class="fade-in">Ready to Find Your Flow?</h2>
                <p class="subheadline fade-in" style="transition-delay: 0.1s;">Take the first step towards financial clarity and a life aligned with your values.</p>
                <div class="cta-actions fade-in" style="transition-delay: 0.2s;">
                    <a href="apply.html" class="button button-primary button-exclusive">Apply to Join</a>
                </div>
            </div>
        </section>
    </main>

    <!-- Main JavaScript - Load with defer for optimal performance -->
    <script defer src="assets/js/script.js?v=2.1"></script>
    
    <!-- Rainbow Calculator Interactive Functionality -->
    <script>
        // Rainbow Calculator State
        const rainbowCalculator = {
            monthlyIncome: 5000,
            allocations: {
                survival: 0,
                lifestyle: 0,
                dreams: 0,
                growth: 0,
                security: 0,
                education: 0,
                giving: 0
            },
            colors: {
                survival: '#FF6B6B',
                lifestyle: '#FF9F43', 
                dreams: '#F7DC6F',
                growth: '#58D68D',
                security: '#5DADE2',
                education: '#BB8FCE',
                giving: '#F1948A'
            },
            presets: {
                conservative: {
                    survival: 50,
                    lifestyle: 15,
                    dreams: 5,
                    growth: 10,
                    security: 15,
                    education: 3,
                    giving: 2
                },
                balanced: {
                    survival: 40,
                    lifestyle: 20,
                    dreams: 15,
                    growth: 10,
                    security: 10,
                    education: 3,
                    giving: 2
                },
                growth: {
                    survival: 35,
                    lifestyle: 15,
                    dreams: 20,
                    growth: 20,
                    security: 5,
                    education: 3,
                    giving: 2
                },
                dreamer: {
                    survival: 30,
                    lifestyle: 10,
                    dreams: 35,
                    growth: 15,
                    security: 5,
                    education: 3,
                    giving: 2
                }
            }
        };

        // Helper function to parse income values like "15K" = 15000
        function parseIncomeValue(input) {
            if (!input) return 0;
            
            // Convert to string and clean up
            const cleanInput = input.toString().replace(/[\$,\s]/g, '').toLowerCase();
            
            // Handle K notation (e.g., "15k" = 15000)
            if (cleanInput.includes('k')) {
                const numericPart = parseFloat(cleanInput.replace('k', ''));
                return numericPart * 1000;
            }
            
            // Handle M notation (e.g., "1.5m" = 1500000)
            if (cleanInput.includes('m')) {
                const numericPart = parseFloat(cleanInput.replace('m', ''));
                return numericPart * 1000000;
            }
            
            // Regular number
            return parseFloat(cleanInput) || 0;
        }

        // Initialize calculator when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ DOM loaded, starting simple test...');
            
            // Set up monthly income input listener
            const monthlyIncomeInput = document.getElementById('monthly-income');
            if (monthlyIncomeInput) {
                monthlyIncomeInput.addEventListener('input', function() {
                    const newIncome = parseIncomeValue(monthlyIncomeInput.value);
                    rainbowCalculator.monthlyIncome = newIncome;
                    console.log('üí∞ Updated monthly income to:', newIncome);
                });
                
                // Initialize from current input value if any
                if (monthlyIncomeInput.value) {
                    rainbowCalculator.monthlyIncome = parseIncomeValue(monthlyIncomeInput.value);
                }
            }
            
            // Simple test - just try to find and interact with inputs
            const inputs = document.querySelectorAll('.amount-input');
            console.log('Found inputs:', inputs.length);
            
            inputs.forEach((input, i) => {
                console.log(`Input ${i}:`, input.getAttribute('data-category'));
                
                // Simple event listener test
                input.addEventListener('click', function() {
                    console.log('CLICK WORKS on', input.getAttribute('data-category'));
                });
                
                input.addEventListener('input', function() {
                    console.log('INPUT WORKS on', input.getAttribute('data-category'), 'value:', input.value);
                    
                    // Test the full update process
                    const category = input.getAttribute('data-category');
                    const amount = parseInt(input.value) || 0;
                    console.log('üí∞ Processing amount:', amount, 'for category:', category);
                    console.log('üí∞ Monthly income:', rainbowCalculator.monthlyIncome);
                    
                    // Calculate percentage
                    const percentage = rainbowCalculator.monthlyIncome > 0 ? 
                        Math.round((amount / rainbowCalculator.monthlyIncome) * 100) : 0;
                    console.log('üìä Calculated percentage:', percentage, '(', amount, '/', rainbowCalculator.monthlyIncome, ')');
                    
                    // Update the allocations
                    rainbowCalculator.allocations[category] = percentage;
                    console.log('üéØ Updated allocations:', rainbowCalculator.allocations);
                    
                    // Try to update the percentage display
                    const percentageDisplay = input.closest('.slider-item').querySelector('.percentage-display');
                    if (percentageDisplay) {
                        percentageDisplay.textContent = `${percentage}%`;
                        console.log('‚úÖ Updated percentage display to:', `${percentage}%`);
                    }
                    
                    // Try to update the rainbow bar
                    const progressBar = document.getElementById('rainbow-progress');
                    if (progressBar) {
                        console.log('üåà Found progress bar, updating...');
                        const segment = progressBar.querySelector(`[data-color="${category}"]`);
                        if (segment) {
                            segment.style.width = `${percentage}%`;
                            console.log('‚úÖ Updated segment width to:', `${percentage}%`);
                        }
                    }
                    
                    // Update the corresponding slider
                    const slider = document.querySelector(`.financial-slider[data-category="${category}"]`);
                    if (slider) {
                        slider.value = percentage;
                        console.log('üéöÔ∏è Updated slider to:', percentage);
                    }
                    
                    // Update totals
                    const totalAllocated = Object.values(rainbowCalculator.allocations).reduce((sum, val) => sum + val, 0);
                    const totalAmount = Math.round((totalAllocated / 100) * rainbowCalculator.monthlyIncome);
                    const remaining = rainbowCalculator.monthlyIncome - totalAmount;
                    
                    const totalAllocatedEl = document.getElementById('total-allocated');
                    const remainingEl = document.getElementById('remaining-amount');
                    
                    if (totalAllocatedEl) {
                        totalAllocatedEl.textContent = `$${totalAmount.toLocaleString()}`;
                    }
                    if (remainingEl) {
                        if (remaining >= 0) {
                            remainingEl.textContent = `($${remaining.toLocaleString()} remaining)`;
                            remainingEl.className = 'remaining';
                        } else {
                            remainingEl.textContent = `($${Math.abs(remaining).toLocaleString()} over budget!)`;
                            remainingEl.className = 'remaining over-budget';
                        }
                    }
                    
                    // Show advanced features when they have a meaningful rainbow
                    if (totalAllocated >= 15) {  // Lowered to 15 for easier access
                        showAdvancedFeatures();
                    } else if (totalAllocated >= 10) {
                        // Show preview of features
                        showFeaturePreview();
                    }
                });
                
                // Make sure it's not disabled
                input.disabled = false;
                input.readOnly = false;
                input.style.pointerEvents = 'auto';
                input.style.zIndex = '999';
                input.style.position = 'relative';
            });
            
            // Try the old initialization too
            try {
                initializeRainbowCalculator();
            } catch (error) {
                console.error('Error in initialization:', error);
            }
            
            // Show features immediately so users can see what's available
            showAdvancedFeatures();
        });

        function showAdvancedFeatures() {
            generatePersonalizedReflection();
            showRainbowComparison();
            generateRebalancingTips();
        }

        function generatePersonalizedReflection() {
            const reflectionEl = document.getElementById('reflection-report');
            const reflectionTextEl = document.getElementById('reflection-text');
            
            if (!reflectionEl || !reflectionTextEl) return;
            
            const allocations = rainbowCalculator.allocations;
            const totalAllocated = Object.values(allocations).reduce((sum, val) => sum + val, 0);
            
            // Generate personalized reflection based on their rainbow
            let reflection = generateReflectionText(allocations, totalAllocated);
            
            reflectionTextEl.innerHTML = reflection;
            reflectionEl.style.display = 'block';
            
            // Animate in
            setTimeout(() => {
                reflectionEl.style.opacity = '0';
                reflectionEl.style.transform = 'translateY(20px)';
                reflectionEl.style.transition = 'all 0.6s ease';
                setTimeout(() => {
                    reflectionEl.style.opacity = '1';
                    reflectionEl.style.transform = 'translateY(0)';
                }, 100);
            }, 100);
        }

        function generateReflectionText(allocations, totalAllocated) {
            const categories = {
                survival: { name: 'Foundation', color: 'stability' },
                lifestyle: { name: 'Joy Fund', color: 'warmth' },
                dreams: { name: 'Dreams', color: 'sunshine' },
                growth: { name: 'Growth Garden', color: 'prosperity' },
                security: { name: 'Freedom Fund', color: 'peace' },
                education: { name: 'Wisdom Well', color: 'depth' },
                giving: { name: 'Heart Space', color: 'love' }
            };
            
            // Find strongest and weakest areas
            const sorted = Object.entries(allocations).sort((a, b) => b[1] - a[1]);
            const strongest = sorted[0];
            const weakest = sorted[sorted.length - 1];
            
            let reflection = [];
            
            // Opening statement
            if (totalAllocated > 95) {
                reflection.push("‚ú® Your rainbow is beautifully complete ‚Äî a full spectrum of financial consciousness!");
            } else if (totalAllocated > 70) {
                reflection.push("üåà Your rainbow is taking gorgeous shape, with vibrant colors emerging across your financial landscape.");
            } else {
                reflection.push("üå± Your rainbow is beginning to bloom ‚Äî what a beautiful start to your financial garden!");
            }
            
            // Strength recognition
            if (strongest[1] > 0) {
                const categoryName = categories[strongest[0]].name;
                const categoryColor = categories[strongest[0]].color;
                reflection.push(`Your ${categoryName} is glowing with ${categoryColor} ‚Äî this shows beautiful prioritization of your ${strongest[0] === 'survival' ? 'foundation' : strongest[0] === 'giving' ? 'generous heart' : 'growth mindset'}.`);
            }
            
            // Gentle suggestion for growth
            if (weakest[1] === 0 && weakest[0] !== 'giving') {
                const categoryName = categories[weakest[0]].name;
                if (weakest[0] === 'security') {
                    reflection.push("Your Freedom Fund could use a gentle ray of sunshine ‚Äî building this pillar will bring such peace to your journey.");
                } else if (weakest[0] === 'dreams') {
                    reflection.push("Your Dreams section is waiting to sparkle ‚Äî even a small allocation here can light up your whole rainbow!");
                } else {
                    reflection.push(`Your ${categoryName} is ready to flourish ‚Äî consider adding a touch of color here to complete your beautiful spectrum.`);
                }
            }
            
            // Encouraging closure
            if (allocations.lifestyle > 15 && allocations.security > 10) {
                reflection.push("You're creating a beautiful balance between joy and security ‚Äî this is the essence of conscious money flow! üå∏");
            } else if (allocations.giving > 0) {
                reflection.push("Your giving heart shines through your rainbow ‚Äî this generosity will create ripples of abundance in your life. üíï");
            } else {
                reflection.push("Every rainbow tells a story, and yours is one of intentional growth and beautiful possibilities. Keep nurturing your colors! üå∫");
            }
            
            return reflection.join(' ');
        }

        function showRainbowComparison() {
            const comparisonEl = document.getElementById('rainbow-comparison');
            if (!comparisonEl) return;
            
            // Get previous rainbow from localStorage
            const previousRainbow = getPreviousRainbow();
            const currentRainbow = rainbowCalculator.allocations;
            
            if (previousRainbow) {
                displayRainbowComparison(previousRainbow, currentRainbow);
                comparisonEl.style.display = 'block';
            }
            
            // Save current rainbow
            saveCurrentRainbow();
        }

        function getPreviousRainbow() {
            try {
                const saved = localStorage.getItem('previousRainbow');
                return saved ? JSON.parse(saved) : null;
            } catch (error) {
                console.log('No previous rainbow found');
                return null;
            }
        }

        function saveCurrentRainbow() {
            try {
                localStorage.setItem('previousRainbow', JSON.stringify(rainbowCalculator.allocations));
            } catch (error) {
                console.log('Could not save rainbow');
            }
        }

        function displayRainbowComparison(previous, current) {
            const previousBar = document.getElementById('previous-rainbow');
            const currentBar = document.getElementById('current-rainbow');
            const celebrationsEl = document.getElementById('growth-celebrations');
            
            if (previousBar) createMiniRainbow(previousBar, previous);
            if (currentBar) createMiniRainbow(currentBar, current);
            
            // Generate celebrations
            const celebrations = generateCelebrations(previous, current);
            if (celebrationsEl && celebrations.length > 0) {
                celebrationsEl.innerHTML = celebrations.map(c => `<div class="celebration-item">${c}</div>`).join('');
            }
        }

        function createMiniRainbow(container, allocations) {
            const total = Object.values(allocations).reduce((sum, val) => sum + val, 0);
            const colors = rainbowCalculator.colors;
            
            container.innerHTML = '';
            
            Object.entries(allocations).forEach(([category, percentage]) => {
                if (percentage > 0) {
                    const segment = document.createElement('div');
                    segment.className = 'mini-progress-segment';
                    segment.style.backgroundColor = colors[category];
                    segment.style.width = total > 0 ? `${(percentage / total) * 100}%` : '0%';
                    
                    if (percentage > 8) {
                        segment.textContent = `${percentage}%`;
                    }
                    
                    container.appendChild(segment);
                }
            });
        }

        function generateCelebrations(previous, current) {
            const celebrations = [];
            const categoryNames = {
                survival: 'Foundation',
                lifestyle: 'Joy Fund',
                dreams: 'Dreams',
                growth: 'Growth Garden',
                security: 'Freedom Fund',
                education: 'Wisdom Well',
                giving: 'Heart Space'
            };
            
            Object.entries(current).forEach(([category, currentValue]) => {
                const previousValue = previous[category] || 0;
                const growth = currentValue - previousValue;
                
                if (growth >= 5) {
                    celebrations.push(`üåü Your ${categoryNames[category]} grew by ${growth}% ‚Äî beautiful progress!`);
                } else if (growth > 0) {
                    celebrations.push(`üå± Your ${categoryNames[category]} is blooming ‚Äî up ${growth}%!`);
                }
            });
            
            if (celebrations.length === 0) {
                celebrations.push('üåà Your rainbow is taking shape beautifully ‚Äî every journey starts with a single step!');
            }
            
            return celebrations;
        }

        function generateRebalancingTips() {
            const tipsEl = document.getElementById('rebalancing-tips');
            const tipsContentEl = document.getElementById('tips-content');
            const challengeEl = document.getElementById('challenge-text');
            
            if (!tipsEl || !tipsContentEl) return;
            
            const allocations = rainbowCalculator.allocations;
            const tips = generateTipsBasedOnRainbow(allocations);
            const challenge = generateMonthlyChallenge(allocations);
            
            if (tips.length > 0) {
                tipsContentEl.innerHTML = tips.map(tip => 
                    `<div class="tip-item">
                        <div class="tip-title">${tip.title}</div>
                        <div class="tip-description">${tip.description}</div>
                    </div>`
                ).join('');
                
                if (challengeEl) {
                    challengeEl.textContent = challenge;
                }
                
                tipsEl.style.display = 'block';
            }
        }

        function generateTipsBasedOnRainbow(allocations) {
            const tips = [];
            
            // Check for imbalances and suggest gentle shifts
            if (allocations.survival > 60) {
                tips.push({
                    title: "üå∏ Gentle Expansion Opportunity",
                    description: "You're beautifully focused on your foundation! Consider shifting 5% from Survival to Dreams ‚Äî you deserve to nurture your aspirations too."
                });
            }
            
            if (allocations.lifestyle > 30 && allocations.security < 10) {
                tips.push({
                    title: "üõ°Ô∏è Balance Joy with Peace",
                    description: "Your Joy Fund is vibrant! Try moving 5% to your Freedom Fund ‚Äî future you will thank present you for this gift of security."
                });
            }
            
            if (allocations.security === 0 && Object.values(allocations).reduce((sum, val) => sum + val, 0) > 50) {
                tips.push({
                    title: "‚òÄÔ∏è Sunshine for Your Freedom Fund",
                    description: "Your rainbow is missing its protective glow! Even 5% in your Freedom Fund creates a beautiful safety net."
                });
            }
            
            if (allocations.education === 0) {
                tips.push({
                    title: "üìö Feed Your Wisdom Well",
                    description: "Consider adding 2-3% to your Wisdom Well ‚Äî investing in yourself always pays the highest dividends!"
                });
            }
            
            if (allocations.giving === 0 && allocations.lifestyle > 20) {
                tips.push({
                    title: "üíï Share Your Abundance",
                    description: "Your generous heart is ready to bloom! Even 1-2% in your Heart Space creates beautiful ripples of connection."
                });
            }
            
            return tips.slice(0, 3); // Show max 3 tips
        }

        function generateMonthlyChallenge(allocations) {
            const challenges = [
                "Grow your Freedom Fund by reading one free personal finance article this week",
                "Boost your Joy Fund by finding one free activity that brings you happiness",
                "Expand your Wisdom Well by watching one educational YouTube video",
                "Nurture your Dreams by writing down three specific goals",
                "Strengthen your Foundation by reviewing and optimizing one monthly expense",
                "Open your Heart Space by performing one small act of kindness",
                "Tend your Growth Garden by researching one simple investment option"
            ];
            
            // Find the lowest allocation and suggest a related challenge
            const sorted = Object.entries(allocations).sort((a, b) => a[1] - b[1]);
            const lowest = sorted[0][0];
            
            const challengeMap = {
                survival: challenges[4],
                lifestyle: challenges[1],
                dreams: challenges[3],
                growth: challenges[6],
                security: challenges[0],
                education: challenges[2],
                giving: challenges[5]
            };
            
            return challengeMap[lowest] || challenges[Math.floor(Math.random() * challenges.length)];
        }

        // Email functionality
        setTimeout(() => {
            const emailButton = document.getElementById('email-rainbow');
            if (emailButton) {
                emailButton.addEventListener('click', function() {
                    emailRainbowResults();
                });
            }
        }, 1000);

        function emailRainbowResults() {
            const allocations = rainbowCalculator.allocations;
            const monthlyIncome = rainbowCalculator.monthlyIncome;
            const totalAllocated = Object.values(allocations).reduce((sum, val) => sum + val, 0);
            
            const subject = "My Rainbow Cashflow Results üåà";
            const body = `Hi there!

I just completed my Rainbow Cashflow allocation and wanted to share my results:

üí∞ Monthly Income: $${monthlyIncome.toLocaleString()}
üåà Total Allocated: ${totalAllocated}%

My Rainbow Breakdown:
üè† Survival (Foundation): ${allocations.survival}% ($${Math.round((allocations.survival/100) * monthlyIncome).toLocaleString()})
üéâ Lifestyle (Joy Fund): ${allocations.lifestyle}% ($${Math.round((allocations.lifestyle/100) * monthlyIncome).toLocaleString()})
‚≠ê Dreams: ${allocations.dreams}% ($${Math.round((allocations.dreams/100) * monthlyIncome).toLocaleString()})
üìà Growth Garden: ${allocations.growth}% ($${Math.round((allocations.growth/100) * monthlyIncome).toLocaleString()})
üõ°Ô∏è Security (Freedom Fund): ${allocations.security}% ($${Math.round((allocations.security/100) * monthlyIncome).toLocaleString()})
üìö Education (Wisdom Well): ${allocations.education}% ($${Math.round((allocations.education/100) * monthlyIncome).toLocaleString()})
üíï Giving (Heart Space): ${allocations.giving}% ($${Math.round((allocations.giving/100) * monthlyIncome).toLocaleString()})

This Rainbow Cashflow system is helping me align my money with my values in such a beautiful way!

Learn more: ${window.location.href}

With gratitude,
[Your name]`;

            const mailtoLink = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.open(mailtoLink);
        }

        // Add CSS for percentage inputs
        const style = document.createElement('style');
        style.textContent = `
            :root {
                --color-border: #e5e7eb;
                --color-primary: #f4a5b9;
                --color-text: #374151;
                --color-text-light: #6b7280;
                --space-2: 0.5rem;
            }
            
            .percentage-input-container {
                display: flex;
                align-items: center;
                background: rgba(255, 255, 255, 0.9);
                border: 2px solid var(--color-border);
                border-radius: 8px;
                padding: 0.25rem 0.5rem;
                transition: all 0.3s ease;
                min-width: 70px;
            }
            
            .percentage-input-container:hover {
                border-color: var(--color-primary);
                background: white;
            }
            
            .percentage-input-container:focus-within {
                border-color: var(--color-primary);
                background: white;
                box-shadow: 0 0 0 3px rgba(244, 165, 185, 0.1);
            }
            
            .percentage-input {
                border: none;
                background: transparent;
                outline: none;
                font-size: 1rem;
                font-weight: 600;
                color: var(--color-text);
                width: 40px;
                text-align: right;
                padding: 0;
            }
            
            .percentage-input::-webkit-outer-spin-button,
            .percentage-input::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }
            
            .percentage-input[type=number] {
                -moz-appearance: textfield;
            }
            
            .percentage-symbol {
                font-size: 0.9rem;
                color: var(--color-text-light);
                margin-left: 2px;
                font-weight: 500;
            }
            
            @keyframes breathe {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.02); }
            }
            
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
            
            .progress-segment.active::after {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
                animation: shimmer 2s infinite;
            }
            
            @keyframes shimmer {
                0% { left: -100%; }
                100% { left: 100%; }
            }
            
            /* Mobile responsive for percentage inputs */
            @media (max-width: 768px) {
                .slider-header {
                    flex-direction: column;
                    text-align: center;
                    gap: var(--space-2);
                }
                
                .slider-display {
                    align-items: center;
                    text-align: center;
                    gap: var(--space-2);
                }
                
                .percentage-input-container {
                    min-width: 60px;
                }
                
                .percentage-input {
                    width: 35px;
                    font-size: 0.9rem;
                }
            }
        `;
        document.head.appendChild(style);

        // Update CSS for amount inputs
        const style2 = document.createElement('style');
        style2.textContent = `
            .amount-input-container {
                display: flex;
                align-items: center;
                background: rgba(255, 255, 255, 0.9);
                border: 2px solid var(--color-border);
                border-radius: 8px;
                padding: 0.25rem 0.5rem;
                transition: all 0.3s ease;
                min-width: 100px;
                max-width: 140px;
            }
            
            .amount-input-container:hover {
                border-color: var(--color-primary);
                background: white;
            }
            
            .amount-input-container:focus-within {
                border-color: var(--color-primary);
                background: white;
                box-shadow: 0 0 0 3px rgba(244, 165, 185, 0.1);
            }
            
            .amount-input {
                border: none;
                background: transparent;
                outline: none;
                font-size: 1rem;
                font-weight: 600;
                color: var(--color-text);
                width: 100%;
                text-align: right;
                padding: 0;
                margin-left: 0.25rem;
                pointer-events: auto !important;
                z-index: 10;
                position: relative;
            }
            
            .amount-input::-webkit-outer-spin-button,
            .amount-input::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }
            
            .amount-input[type=number] {
                -moz-appearance: textfield;
            }
            
            .dollar-symbol {
                font-size: 1rem;
                color: var(--color-text-light);
                font-weight: 600;
            }
            
            .percentage-display {
                font-size: 1rem;
                color: var(--color-text-light);
                font-weight: 500;
                margin-top: 0.25rem;
            }
            
            .slider-display {
                display: flex;
                flex-direction: column;
                align-items: flex-end;
                gap: 0.25rem;
            }
            
            @keyframes breathe {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.02); }
            }
            
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
            
            .progress-segment.active::after {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
                animation: shimmer 2s infinite;
            }
            
            @keyframes shimmer {
                0% { left: -100%; }
                100% { left: 100%; }
            }
            
            /* Mobile responsive for amount inputs */
            @media (max-width: 768px) {
                .slider-header {
                    flex-direction: column;
                    text-align: center;
                    gap: var(--space-2);
                }
                
                .slider-display {
                    align-items: center;
                    text-align: center;
                    gap: var(--space-2);
                }
                
                .amount-input-container {
                    min-width: 90px;
                    max-width: 120px;
                }
                
                .amount-input {
                    font-size: 0.9rem;
                }
                
                .percentage-display {
                    font-size: 0.9rem;
                }
            }
            
            /* New reflection report styles */
            .reflection-report {
                background: linear-gradient(135deg, #f8f9ff 0%, #fff5f8 100%);
                border-radius: 16px;
                padding: 2rem;
                margin: 2rem 0;
                border: 1px solid #e5e7eb;
                box-shadow: 0 4px 20px rgba(244, 165, 185, 0.1);
            }
            
            .reflection-header {
                text-align: center;
                margin-bottom: 1.5rem;
            }
            
            .reflection-header h3 {
                color: #374151;
                margin-bottom: 0.5rem;
            }
            
            .reflection-subtitle {
                color: #6b7280;
                font-style: italic;
            }
            
            .reflection-text {
                background: white;
                padding: 1.5rem;
                border-radius: 12px;
                margin-bottom: 2rem;
                font-size: 1.1rem;
                line-height: 1.6;
                color: #374151;
                border-left: 4px solid var(--color-primary);
            }
            
            .reflection-actions {
                display: flex;
                gap: 1rem;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .reflection-actions .button {
                min-width: 150px;
            }
            
            /* Rainbow comparison styles */
            .rainbow-comparison {
                background: linear-gradient(135deg, #f0f9ff 0%, #f8fafc 100%);
                border-radius: 16px;
                padding: 2rem;
                margin: 2rem 0;
                border: 1px solid #e5e7eb;
            }
            
            .comparison-header {
                text-align: center;
                margin-bottom: 2rem;
            }
            
            .comparison-bars {
                display: flex;
                align-items: center;
                gap: 2rem;
                margin-bottom: 2rem;
                justify-content: center;
            }
            
            .comparison-item {
                text-align: center;
                flex: 1;
                max-width: 300px;
            }
            
            .comparison-item h4 {
                margin-bottom: 1rem;
                color: #374151;
            }
            
            .mini-rainbow-bar {
                height: 40px;
                border-radius: 20px;
                display: flex;
                overflow: hidden;
                background: #f3f4f6;
                position: relative;
            }
            
            .mini-progress-segment {
                height: 100%;
                transition: all 0.5s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 0.8rem;
                font-weight: 600;
                color: white;
                text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            }
            
            .comparison-arrow {
                font-size: 2rem;
                color: var(--color-primary);
                animation: bounce 2s infinite;
            }
            
            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% { transform: translateX(0); }
                40% { transform: translateX(-5px); }
                60% { transform: translateX(5px); }
            }
            
            .growth-celebrations {
                background: linear-gradient(135deg, #ecfdf5 0%, #f0fdf4 100%);
                border: 1px solid #86efac;
                border-radius: 12px;
                padding: 1.5rem;
                text-align: center;
            }
            
            .celebration-item {
                margin: 0.5rem 0;
                font-size: 1.1rem;
                color: #065f46;
                animation: celebrationGlow 2s ease-in-out infinite alternate;
            }
            
            @keyframes celebrationGlow {
                from { opacity: 0.8; }
                to { opacity: 1; }
            }
            
            /* Rebalancing tips styles */
            .rebalancing-tips {
                background: linear-gradient(135deg, #f0fdf4 0%, #f7fee7 100%);
                border-radius: 16px;
                padding: 2rem;
                margin: 2rem 0;
                border: 1px solid #86efac;
            }
            
            .tips-header {
                text-align: center;
                margin-bottom: 1.5rem;
            }
            
            .tips-content {
                display: grid;
                gap: 1rem;
                margin-bottom: 2rem;
            }
            
            .tip-item {
                background: white;
                padding: 1rem;
                border-radius: 8px;
                border-left: 4px solid #10b981;
                box-shadow: 0 2px 8px rgba(16, 185, 129, 0.1);
            }
            
            .tip-title {
                font-weight: 600;
                color: #065f46;
                margin-bottom: 0.5rem;
            }
            
            .tip-description {
                color: #374151;
                font-size: 0.95rem;
            }
            
            .monthly-challenge {
                background: linear-gradient(135deg, #fef3c7 0%, #fef9c3 100%);
                border: 1px solid #fbbf24;
                border-radius: 12px;
                padding: 1.5rem;
                text-align: center;
            }
            
            .monthly-challenge h4 {
                color: #92400e;
                margin-bottom: 1rem;
            }
            
            .monthly-challenge p {
                color: #78350f;
                font-size: 1.1rem;
                font-weight: 500;
            }
            
            /* Responsive adjustments */
            @media (max-width: 768px) {
                .comparison-bars {
                    flex-direction: column;
                    gap: 1rem;
                }
                
                .comparison-arrow {
                    transform: rotate(90deg);
                }
                
                .reflection-actions {
                    flex-direction: column;
                }
                
                .reflection-actions .button {
                    width: 100%;
                }
            }
        `;
        document.head.appendChild(style2);
    </script>
    
    <!-- Progressive enhancement script -->
    <script>
        // Remove loading placeholders when page is fully loaded
        window.addEventListener('load', function() {
            document.querySelectorAll('.loading-placeholder').forEach(function(el) {
                el.classList.remove('loading-placeholder');
            });
        });
        
        // Preload critical pages for faster navigation
        const criticalPages = ['/index.html', '/about.html', '/apply.html'];
        criticalPages.forEach(page => {
            const link = document.createElement('link');
            link.rel = 'prefetch';
            link.href = page;
            document.head.appendChild(link);
        });
    </script>
</body>
</html>
